---
// src/pages/[...lang]/chaincode-boss.astro - Página de registro específica para Chaincode
import Layout from '../../layouts/Layout.astro';
import { Icon } from 'astro-icon/components'
import { getTranslation, getLocalizedPageUrl } from '../../i18n/utils.js';
import LanguageSelector from '../../components/languageSelector.astro';

// Generar rutas estáticas para todos los idiomas
export async function getStaticPaths() {
  return [
    { params: { lang: undefined } },  // Para la ruta raíz / (español)
    { params: { lang: 'en' } },       // Para /en (inglés)
    { params: { lang: 'ca' } },       // Para /ca (catalán)
    { params: { lang: 'pt' } }        // Para /pt (portugués)
  ];
}

// Obtener el parámetro de idioma
const { lang } = Astro.params;

// Determinar locale: si no hay lang, es español
const locale = lang || 'es';
const translations = getTranslation(locale);
const t = translations as any; // Type casting para evitar errores de TypeScript

// Feature flag para el formulario de registro de Chaincode
// Usa PUBLIC_CHAINCODE_REGISTRATION_OPEN si está definido, sino usa PUBLIC_REGISTRATION_OPEN como fallback
const chaincodeRegistrationFlag = import.meta.env.PUBLIC_CHAINCODE_REGISTRATION_OPEN;
const isFormOpen = chaincodeRegistrationFlag !== undefined 
    ? chaincodeRegistrationFlag === 'true'
    : import.meta.env.PUBLIC_REGISTRATION_OPEN === 'true';
const reopenDate = import.meta.env.PUBLIC_CHAINCODE_REGISTRATION_REOPEN_DATE || import.meta.env.PUBLIC_REGISTRATION_REOPEN_DATE || '2025-10-22';

const backHomeUrl = locale === 'es' ? '/' : `/${locale}`;
---

<Layout locale={locale}>
    <!-- Header / Navigation -->
    <header class="header" role="banner">
        <nav class="nav" role="navigation" aria-label={t.nav.menu_aria}>
            <div class="nav-container">
                <div class="nav-brand">
                    <a href={backHomeUrl} class="nav-link" aria-label={t.nav.brand_link_aria}>
                        <img src="/b4os.png" alt={t.nav.logo_alt} class="logo" width="64" height="64">
                    </a>
                    <img src="/boss-challenge.png" alt="BOSS Challenge" class="boss-challenge-logo" width="131" height="56">
                </div>
                <div class="nav-menu" id="navMenu">
                </div>
                <div class="nav-utilities">
                    <LanguageSelector locale={locale} />
                    <button class="nav-toggle" id="navToggle" aria-label={t.nav.toggle_aria} aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Partner Header Section (Hero) -->
    <section id="inicio" class="hero-section partner-header">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title-main">{t.chaincode_boss.hero_title}</h1>
                <h2 class="hero-title">
                    <span class="hero-title-sub chaincode-subtitle">{t.chaincode_boss.hero_subtitle}</span>
                </h2>
                <div class="hero-actions">
                    <a href="#registro" class="btn btn-primary chaincode-btn" rel="nofollow">{t.chaincode_boss.cta_primary}</a>
                </div>
            </div>
            <div class="b4os-south" aria-hidden="true"></div>
        </div>
    </section>

    <!-- Registration Info Section -->
    <section class="registration-info-section">
        <div class="container">
            <h2>{t.chaincode_boss.registration.title}</h2>
            <p class="registration-description">{t.chaincode_boss.registration.description}</p>

            <div class="boss-registration-intro">
                <div class="boss-block">
                    <h3>{t.chaincode_boss.registration.career.title}</h3>
                    <div set:html={t.chaincode_boss.registration.career.body}></div>
                </div>
                <div class="boss-block">
                    <h3>{t.chaincode_boss.registration.path.title}</h3>
                    <div set:html={t.chaincode_boss.registration.path.body}></div>
                </div>
            </div>

            <div class="requirements">
                <h3>{t.registration.requirements.title}</h3>
                <ul>
                    <li set:html={t.registration.requirements.experience}></li>
                    <li set:html={t.registration.requirements.languages}></li>
                    <li set:html={t.registration.requirements.savingSatoshi}></li>
                    <li set:html={t.registration.requirements.interest}></li>
                    <li set:html={t.registration.requirements.availability}></li>
                    <li set:html={t.registration.requirements.resilience}></li>
                    <li set:html={t.registration.requirements.spanish}></li>
                </ul>
            </div>

            <p class="boss-registration-closing">{t.chaincode_boss.registration.closing}</p>

            <div class="registration-period">
                {isFormOpen ? (
                    <div class="period-badge">
                        <span><strong>{t.chaincode_boss.registration.period.label}:</strong> {t.chaincode_boss.registration.period.dates}</span>
                    </div>
                ) : (
                    <div class="period-badge period-badge-closed">
                        <span><strong>{t.registration.closed?.badge_label || 'Estado'}:</strong> {t.registration.closed?.badge_text || 'Registro Cerrado'}</span>
                    </div>
                )}
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="how-it-works-section">
        <div class="container">
            <h2>{t.chaincode_boss.how_it_works.title}</h2>
            <p class="how-subtitle">{t.chaincode_boss.how_it_works.subtitle}</p>

            <div class="boss-timeline">
                <!-- Month 1: Text left, Image right -->
                <div class="timeline-month timeline-left">
                    <div class="timeline-content">
                        <div class="month-badge">1</div>
                        <h4>{t.chaincode_boss.how_it_works.month1.title}</h4>
                        <p>{t.chaincode_boss.how_it_works.month1.description}</p>
                    </div>
                    <div class="timeline-image">
                        <img src="/tejon.jpeg" alt="Month 1" loading="lazy" />
                    </div>
                </div>

                <!-- Month 2-3: Image left, Text right -->
                <div class="timeline-month timeline-right">
                    <div class="timeline-image">
                        <img src="https://bosschallenge.xyz/img/stage2.png" alt="Months 2" loading="lazy" />
                    </div>
                    <div class="timeline-content">
                        <div class="month-badge">2</div>
                        <h4>{t.chaincode_boss.how_it_works.month2.title}</h4>
                        <p>{t.chaincode_boss.how_it_works.month2.description}</p>
                    </div>
                </div>

                <div class="timeline-month timeline-left">
                    <div class="timeline-content">
                        <div class="month-badge">3</div>
                        <h4>{t.chaincode_boss.how_it_works.month3.title}</h4>
                        <p>{t.chaincode_boss.how_it_works.month3.description}</p>
                    </div>
                    <div class="timeline-image">
                        <img src="https://bosschallenge.xyz/img/stage1.png" alt="Months 3" loading="lazy" />
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Registration Form Section -->
    <section id="registro" class="registration-form-section">
        <div class="container">
            <div class:list={["registration-form-container", { 'form-closed': !isFormOpen }]}>

                {/* Overlay de waitlist cuando el formulario está cerrado */}
                {!isFormOpen && (
                    <div class="form-overlay">
                        <div class="waitlist-box">
                            <div class="waitlist-icon">
                                <Icon name="heroicons:clock" size={56} />
                            </div>
                            <h3 class="waitlist-title">{t.registration.closed?.title || 'Registro temporalmente cerrado'}</h3>
                            <p class="waitlist-subtitle">{t.registration.closed?.subtitle || 'Pronto abriremos nuevas inscripciones. Sé de los primeros en saberlo:'}</p>

                            <form class="waitlist-form" id="waitlistForm">
                                <input
                                    type="email"
                                    name="email"
                                    placeholder={t.registration.closed?.email_placeholder || 'tu@email.com'}
                                    required
                                    aria-label={t.registration.closed?.email_aria_label || 'Email para lista de espera'}
                                />
                                <button type="submit" class="btn btn-primary">
                                    <Icon name="heroicons:bell-alert" size={20} />
                                    {t.registration.closed?.cta || 'Notificarme'}
                                </button>
                            </form>
                        </div>
                    </div>
                )}

                <form class="registration-form" id="registrationForm" role="form" aria-label={t.registration.form.aria_label}>
                    <h3>{t.registration.form.title}</h3>

                    <div class="form-group">
                        <label for="name">{t.registration.form.name.label}</label>
                        <input type="text" id="name" name="name" required aria-describedby="name-help">
                        <small id="name-help">{t.registration.form.name.help}</small>
                    </div>

                    <div class="form-group">
                        <label for="email">{t.registration.form.email.label}</label>
                        <input type="email" id="email" name="email" required aria-describedby="email-help">
                        <small id="email-help">{t.registration.form.email.help}</small>
                    </div>

                    <div class="form-group">
                        <label for="country">{t.registration.form.country.label}</label>
                        <select id="country" name="country" required aria-describedby="country-help">
                            <option value="">{t.registration.form.country.placeholder}</option>
                        </select>
                        <small id="country-help">{t.registration.form.country.help}</small>
                    </div>

                    <div class="form-group">
                        <label for="city">{t.registration.form.city.label}</label>
                        <select id="city" name="city" required disabled aria-describedby="city-help">
                            <option value="">{t.registration.form.city.placeholder}</option>
                        </select>
                        <small id="city-help">{t.registration.form.city.help}</small>
                    </div>

                    <div class="form-group">
                        <fieldset>
                            <legend>{t.registration.form.gender.label}</legend>
                            <div class="radio-group">
                                {Object.entries(t.registration.form.gender.options).map(([key, value]) => (
                                    <label class="radio-label" for={`gender-${key}`}>
                                        <input 
                                            type="radio" 
                                            id={`gender-${key}`} 
                                            name="gender" 
                                            value={key}
                                            aria-describedby="gender-help"
                                        >
                                        <span>{value}</span>
                                    </label>
                                ))}
                            </div>
                            <div id="gender-self-describe-container" style="display: none; margin-top: 15px;">
                                <input 
                                    type="text" 
                                    id="gender-self-describe-text" 
                                    name="gender-self-describe-text" 
                                    placeholder={t.registration.form.gender.self_describe_placeholder}
                                    aria-describedby="gender-help"
                                    style="width: 100%; padding: var(--spacing-md); border: 2px solid var(--border-color); border-radius: var(--border-radius-md); font-size: var(--font-size-base);"
                                >
                            </div>
                            <small id="gender-help">{t.registration.form.gender.help}</small>
                        </fieldset>
                    </div>

                    <div class="form-group">
                        <label for="experience">{t.registration.form.experience.label}</label>
                        <select id="experience" name="experience" required>
                            <option value="">{t.registration.form.experience.placeholder}</option>
                            <option value="2-5">{t.registration.form.experience.options['2-5']}</option>
                            <option value="5-10">{t.registration.form.experience.options['5-10']}</option>
                            <option value="10+">{t.registration.form.experience.options['10+']}</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="dev-language">{t.registration.form.dev_language.label}</label>
                        <select id="dev-language" name="dev-language" required aria-describedby="dev-language-help">
                            <option value="">{t.registration.form.dev_language.placeholder}</option>
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="java">Java</option>
                            <option value="typescript">TypeScript</option>
                            <option value="csharp">C#</option>
                            <option value="cpp">C++</option>
                            <option value="php">PHP</option>
                            <option value="go">Go</option>
                            <option value="rust">Rust</option>
                            <option value="swift">Swift</option>
                            <option value="kotlin">Kotlin</option>
                            <option value="ruby">Ruby</option>
                            <option value="scala">Scala</option>
                            <option value="dart">Dart</option>
                            <option value="c">C</option>
                            <option value="r">R</option>
                            <option value="matlab">MATLAB</option>
                            <option value="perl">Perl</option>
                            <option value="lua">Lua</option>
                            <option value="haskell">Haskell</option>
                            <option value="elixir">Elixir</option>
                            <option value="clojure">Clojure</option>
                            <option value="otro">Otro</option>
                        </select>
                        <small id="dev-language-help">{t.registration.form.dev_language.help}</small>
                    </div>

                    <div class="form-group">
                        <label for="technologies">{t.registration.form.technologies.label}</label>
                        <textarea id="technologies" name="technologies" placeholder={t.registration.form.technologies.placeholder} required aria-describedby="tech-help"></textarea>
                        <small id="tech-help">{t.registration.form.technologies.help}</small>
                    </div>

                    <div class="form-group">
                        <label for="github">{t.registration.form.github.label}</label>
                        <input type="url" id="github" name="github" placeholder={t.registration.form.github.placeholder} aria-describedby="github-help" required>
                        <small id="github-help">{t.registration.form.github.help}</small>
                    </div>

                    <div class="form-group">
                        <label for="linkedin">{t.registration.form.linkedin.label}</label>
                        <input type="url" id="linkedin" name="linkedin" placeholder={t.registration.form.linkedin.placeholder} aria-describedby="linkedin-help">
                        <small id="linkedin-help">{t.registration.form.linkedin.help}</small>
                    </div>

                    <div class="form-group">
                        <label for="motivation">{t.registration.form.motivation.label}</label>
                        <textarea id="motivation" name="motivation" required aria-describedby="motivation-help"></textarea>
                        <small id="motivation-help">{t.registration.form.motivation.help}</small>
                    </div>

                    {/* Campo oculto para rastrear que el registro viene de Chaincode */}
                    <input type="hidden" name="how-heard" value="chaincode">

                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="terms" required aria-describedby="terms-help">
                            <span set:html={t.registration.form.terms.label.replace('{link}', `<a href="${getLocalizedPageUrl('terminos', locale)}" target="_blank" rel="noopener">${t.registration.form.terms.link_text}</a>`)}></span>
                        </label>
                        <small id="terms-help">{t.registration.form.terms.help}</small>
                    </div>

                    <button type="submit" class="btn btn-primary btn-full">
                        {t.registration.form.submit}
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contacto" class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content"> 
                <div class="footer-section">
                    <div class="footer-brand">
                        <img src="/b4os.png" alt={t.footer.logo_alt} class="footer-logo" width="32" height="32">
                    </div>
                    <p set:html={t.footer.description}></p>
                </div>
                
                <nav class="footer-section" aria-label={t.footer.quick_links_aria}>
                    <h4>{t.footer.quick_links.title}</h4>
                    <ul class="footer-links">
                        <li><a href={backHomeUrl}>{t.nav.objectives}</a></li>
                        <li><a href={`${backHomeUrl}#residencias`}>{t.nav.residences}</a></li>
                        <li><a href={`${backHomeUrl}#cronograma`}>{t.nav.schedule}</a></li>
                        <li><a href={`${backHomeUrl}#beneficios`}>{t.nav.benefits}</a></li>
                    </ul>
                </nav>
                
                <nav class="footer-section" aria-label={t.footer.resources_aria}>
                    <h4>{t.footer.resources.title}</h4>
                    <ul class="footer-links">
                        <li><a href="https://www.libreriadesatoshi.com/" target="_blank" rel="noopener">{t.footer.resources.library}</a></li>
                        <li><a href="https://www.libreriadesatoshi.com/#courses" target="_blank" rel="noopener">{t.footer.resources.courses}</a></li>
                    </ul>
                </nav>
                
                <div class="footer-section">
                    <h4>{t.footer.contact.title}</h4>
                    <div class="contact-info">
                        <p>
                            <Icon name="heroicons:envelope-solid" size={24} />
                            <a href="mailto:hola@b4os.dev">hola@b4os.dev</a>
                        </p>
                        <div class="footer-social">
                            <a href="https://www.facebook.com/libsatoshi" aria-label={t.footer.social_aria.facebook} target="_blank" rel="noopener">
                                <Icon name="mdi:facebook" size={24} />
                            </a>
                            <a href="https://www.linkedin.com/company/libdesatoshi/" aria-label={t.footer.social_aria.linkedin} target="_blank" rel="noopener">
                                <Icon name="mdi:linkedin" size={24} />
                            </a>
                            <a href="https://x.com/libdesatoshi" aria-label={t.footer.social_aria.twitter} target="_blank" rel="noopener">
                                <Icon name="mdi:twitter" size={24} />
                            </a>
                            <a href="https://github.com/LibreriadeSatoshi" aria-label={t.footer.social_aria.github} target="_blank" rel="noopener">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" aria-hidden="true">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                            </a>
                            <a href="https://discord.gg/MSrtGYf4Jh" aria-label={t.footer.social_aria.discord} target="_blank" rel="noopener">
                                <Icon name="mdi:discord" size={24} />
                            </a>                           
                            <a href="https://primal.net/p/nprofile1qqsgkt24wdkaksa8exnxgy6tmzs42tra8g30mvplcmk3eqar0z30rxggvqeay" aria-label={t.footer.social_aria.nostr} target="_blank" rel="noopener">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" width="32" height="32" aria-hidden="true"><path d="M210.8 199.4c0 3.1-2.5 5.7-5.7 5.7h-68c-3.1 0-5.7-2.5-5.7-5.7v-15.5c.3-19 2.3-37.2 6.5-45.5 2.5-5 6.7-7.7 11.5-9.1 9.1-2.7 24.9-.9 31.7-1.2 0 0 20.4.8 20.4-10.7s-9.1-8.6-9.1-8.6c-10 .3-17.7-.4-22.6-2.4-8.3-3.3-8.6-9.2-8.6-11.2-.4-23.1-34.5-25.9-64.5-20.1-32.8 6.2.4 53.3.4 116.1v8.4c0 3.1-2.6 5.6-5.7 5.6H57.7c-3.1 0-5.7-2.5-5.7-5.7v-144c0-3.1 2.5-5.7 5.7-5.7h31.7c3.1 0 5.7 2.5 5.7 5.7 0 4.7 5.2 7.2 9 4.5 11.4-8.2 26-12.5 42.4-12.5 36.6 0 64.4 21.4 64.4 68.7v83.2ZM150 99.3c0-6.7-5.4-12.1-12.1-12.1s-12.1 5.4-12.1 12.1 5.4 12.1 12.1 12.1S150 106 150 99.3Z"/></svg>
                            </a>  
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <div>
                        <p set:html={t.footer.copyright}></p>
                    </div>
                    <nav class="footer-legal" aria-label={t.footer.legal_aria}>
                        <a href={getLocalizedPageUrl('terminos', locale)} rel="nofollow">{t.footer.legal.terms}</a>
                        <a href={getLocalizedPageUrl('codigo-conducta', locale)} rel="nofollow">{t.footer.legal.conduct}</a>
                    </nav>
                </div>
            </div>
        </div>
    </footer>
</Layout>

<style>
    .registration-period {
        display: flex;
        justify-content: center;
    }

    .nav-brand {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
    }

    .boss-challenge-logo {
        height: 56px;
        width: auto;
        object-fit: contain;
    }

    .chaincode-background {
        background: url('/boss_latam.png') no-repeat left center !important;
        background-size: cover !important;
    }

    .b4os-south {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('/b4os-south.jpeg') no-repeat center center;
        background-size: cover;
        z-index: 0;
    }

    .timeline-bg {
        width: 100%;
        max-width: 350px;
        height: 280px;
        border-radius: var(--border-radius-lg);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        margin: 0 auto;
    }

    .timeline-bg.chaincode-background {
        background: url('/boss_latam.png') no-repeat center center;
        background-size: contain;
    }

    .chaincode-subtitle {
        color: var(--text-white) !important;
    }

    .chaincode-btn {
        background: #eb5234 !important;
        border-color: #eb5234 !important;
        color: #fff !important;
    }

    .chaincode-btn:hover {
        background: #d4472b !important;
        border-color: #d4472b !important;
        color: #fff !important;
    }

    .partner-header .hero-content {
        position: relative;
        z-index: 1;
        margin-left: 50%;
        max-width: 50%;
        text-align: right;
    }

    @media (max-width: 768px) {
        .chaincode-background {
            background: 
                linear-gradient(to bottom, 
                    rgba(0, 0, 0, 0.7) 0%,
                    rgba(0, 0, 0, 0.5) 50%,
                    transparent 100%
                ),
                url('/boss_latam.png') no-repeat center center !important;
            background-size: cover !important;
        }

        .b4os-south {
            background: 
                linear-gradient(to bottom, 
                    rgba(0, 0, 0, 0.6) 0%,
                    rgba(0, 0, 0, 0.4) 50%,
                    transparent 100%
                ),
                url('/b4os-south.jpeg') no-repeat center center;
            background-size: cover;
        }

        .partner-header .hero-content {
            margin-left: 0;
            max-width: 100%;
            text-align: center;
        }
    }

    /* Registration Info Section */
    .registration-info-section {
        padding: var(--spacing-3xl) 0;
        background: var(--bg-white);
    }

    .registration-info-section h2 {
        font-size: var(--font-size-3xl);
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: var(--spacing-lg);
        text-align: center;
    }

    .registration-description {
        font-size: var(--font-size-lg);
        color: var(--text-light);
        text-align: center;
        max-width: 800px;
        margin: 0 auto var(--spacing-2xl);
        line-height: 1.7;
    }

    .boss-registration-intro {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-xl);
        margin: var(--spacing-2xl) 0;
    }

    @media (max-width: 768px) {
        .boss-registration-intro {
            grid-template-columns: 1fr;
        }
    }

    .boss-block {
        padding: var(--spacing-lg);
        background: var(--bg-light);
        border-radius: var(--border-radius-lg);
        border-left: 4px solid var(--primary-color);
    }

    .boss-block h3 {
        font-size: var(--font-size-xl);
        font-weight: 600;
        margin-bottom: var(--spacing-md);
        color: var(--text-dark);
    }

    .boss-block p {
        color: var(--text-light);
        line-height: 1.7;
        margin: 0;
    }

    .boss-block ul {
        color: var(--text-light);
        line-height: 1.7;
        margin: 0;
        margin-left: var(--spacing-md);
        padding-left: var(--spacing-lg);
    }

    .boss-block li {
        margin-bottom: var(--spacing-sm);
    }

    .boss-block li:last-child {
        margin-bottom: 0;
    }

    .boss-registration-closing {
        font-size: var(--font-size-lg);
        font-weight: 500;
        color: var(--text-dark);
        margin: var(--spacing-xl) 0;
        padding: var(--spacing-md);
        background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(247, 147, 26, 0.05));
        border-radius: var(--border-radius-md);
        text-align: center;
    }

    /* How It Works Section */
    .how-it-works-section {
        padding: var(--spacing-3xl) 0;
        background: var(--bg-light);
    }

    .how-it-works-section h2 {
        font-size: var(--font-size-3xl);
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: var(--spacing-md);
        text-align: center;
    }

    .how-subtitle {
        color: var(--text-light);
        font-size: var(--font-size-lg);
        margin-bottom: var(--spacing-2xl);
        line-height: 1.6;
        text-align: center;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }

    .boss-timeline {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-3xl);
        margin-top: var(--spacing-2xl);
    }

    .timeline-month {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-3xl);
        align-items: center;
        background: transparent;
        padding: var(--spacing-2xl) 0;
    }

    .timeline-content {
        padding: 0;
        background: transparent;
        box-shadow: none;
    }

    .timeline-image {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .timeline-image img {
        width: 200%;
        max-width: 500px;
        height: 400px;
        border-radius: var(--border-radius-xl);
        object-fit: cover;
    }


    .month-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 52px;
        height: 52px;
        padding: 0 var(--spacing-xs);
        background: var(--primary-color);
        color: var(--text-dark);
        border-radius: 12px;
        font-size: var(--font-size-sm);
        font-weight: 700;
        margin-bottom: var(--spacing-md);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        line-height: 1;
    }

    .timeline-month h4 {
        font-size: var(--font-size-2xl);
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: var(--spacing-md);
        line-height: 1.3;
    }

    .month-category {
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-xs);
        padding: var(--spacing-xs) var(--spacing-sm);
        background: rgba(247, 147, 26, 0.1);
        border-radius: var(--border-radius-sm);
        margin-bottom: var(--spacing-md);
        font-size: var(--font-size-sm);
        font-weight: 500;
        color: var(--primary-color);
    }

    .timeline-month p {
        color: var(--text-light);
        line-height: 1.7;
        margin: 0;
        font-size: var(--font-size-base);
    }

    /* Registration Form Section */
    .registration-form-section {
        padding: var(--spacing-3xl) 0;
        background: var(--bg-white);
    }

    .registration-form-container {
        max-width: 700px;
        margin: 0 auto;
        position: relative;
    }

    @media (max-width: 968px) {
        .timeline-month {
            grid-template-columns: 1fr;
            gap: var(--spacing-xl);
        }

        .timeline-month.timeline-right .timeline-image {
            order: -1;
        }

        .timeline-content {
            padding: 0;
        }
    }

</style>

<script>
    // Sobrescribir el método setupHowHeardCheckboxes del FormHandler
    // porque en la página de Chaincode usamos un campo oculto en lugar del selector
    if (typeof window.FormHandler !== 'undefined') {
        const originalSetupHowHeardCheckboxes = window.FormHandler.prototype.setupHowHeardCheckboxes;

        window.FormHandler.prototype.setupHowHeardCheckboxes = function() {
            // En la página de Chaincode, el campo how-heard es oculto con valor fijo
            // No necesitamos configurar listeners
            // console.log('✓ Campo how-heard configurado como oculto con valor "chaincode"');
        };

        // También sobrescribir la validación del campo how-heard
        const originalValidateForm = window.FormHandler.prototype.validateForm;

        window.FormHandler.prototype.validateForm = function() {
            const result = originalValidateForm.call(this);

            // Filtrar errores relacionados con how-heard ya que es un campo oculto
            if (result.errors) {
                result.errors = result.errors.filter(error =>
                    !error.includes('cómo te enteraste de B4OS') &&
                    !error.includes('Otros')
                );
                result.isValid = result.errors.length === 0;
            }

            return result;
        };
    }
</script>
